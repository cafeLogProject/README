<div align="center">
	
![](./image/brewscape.png)

</div>

# â˜• brewscape - ì¹´í˜ë¡œê·¸
#### "ê³µë¶€í•˜ê¸° ì¢‹ì€ ì¹´í˜ ì—†ë‚˜? ì»¤í”¼ê°€ ë§›ìˆëŠ” ì¹´í˜ ì—†ë‚˜?"
* ì¹´í˜ë¡œê·¸ëŠ” ì—¬ëŸ¬ ì¥ì†Œ ì¤‘ì—ì„œë„ ì¹´í˜ ìœ„ì£¼ì˜ ë¦¬ë·°ë¥¼ ëª¨ì•„ë³´ê³  ì‹¶ì€ ì‚¬ìš©ìë“¤ì„ ìœ„í•œ ì›¹ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
* ê°œê°œì¸ì˜ ì·¨í–¥ì— ë”°ë¼ ì¹´í˜ë¥¼ íƒìƒ‰í•˜ê³  ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

## ğŸ“… ê°œë°œ ê¸°ê°„
#### `2024.12.13 ~ 2025.2.6 (2ê°œì›”)`

<br>

## ğŸƒ íŒ€ì› ì†Œê°œ
|[ê¹€ë³‘ì°¬](https://github.com/íŒ€ì›1ì•„ì´ë””)|[ë¬¸ë‚¨ê²½](https://github.com/íŒ€ì›2ì•„ì´ë””)| [ì´ìŠ¹í—Œ](https://github.com/íŒ€ì›3ì•„ì´ë””) |[ì„ìš©íƒœ](https://github.com/íŒ€ì›4ì•„ì´ë””)| [ì´ì£¼ì—°](https://github.com/leejuyeon-star)|
| :-------------------------: | :-------------------------: | :----------------------: | :-----------------------: | :-----------------------: |
| Backend | UI/UX Design | Frontend | Frontend | Backend |
| ![-](image/profile/-.png) | ![-](image/profile/-.png) | ![-](image/profile/-.png) | ![-](image/profile/-.png) | ![leejuyeon](image/profile/leejuyeon.jpg) |



<br>

## ğŸ” ì£¼ìš” ê¸°ëŠ¥

| **ì¹´í˜ ê²€ìƒ‰** | **ì¹´í˜ ìƒì„¸í˜ì´ì§€** |
|:---:|:---:|
| <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/adf1449a-b016-4a5c-874a-8c7839490ca7" width="440" height="260" /> | <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/eac545ae-84b0-4d6a-8d25-6ccd41ef3b17" width="440" height="260" /> | 
| **ë¦¬ë·° í•„í„°ë§ ì¡°íšŒ** | **ë¦¬ë·° ì‘ì„±, ì„ì‹œì €ì¥** |
| <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/97064c73-b97d-417d-9e33-54ca1a7a96b5" width="440" height="260" /> | <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/3f370f44-47cb-480a-b433-5e885ff4f00d" width="440" height="260" /> | 
| **íšŒì›ê°€ì…, ë¡œê·¸ì¸** | **ë§ˆì´í˜ì´ì§€** |
| <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/23a1ad5b-0408-42e4-918a-c7c7fb7b0934" width="440" height="260" /> | <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/14686d48-6457-4f58-8576-043a581f158f" width="440" height="260" /> | 
| **ì¹´í˜ ìŠ¤í¬ë©** |
| <img src ="https://github.com/chujaeyeong/MAT_ZIP_readme_chujy/assets/123634960/23a1ad5b-0408-42e4-918a-c7c7fb7b0934" width="440" height="260" /> |
<br>

<br>

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸
| ![java](image/fr/-.png) | ![maven](image/be/-.png) | ![spring_boot](image/be/-.png) | ![jpa](image/be/-.png) | ![security](image/be/-.png)  |
|----------------------------|------------------------------|------------------------------------------|--------------------------|-------------------------------|
| ?                    | ?                        | ?                              | ?                   | ?                |

### ë°±ì—”ë“œ 
| ![java](image/be/java.png) | ![gradle](image/be/gradle.png) | ![spring_boot](image/be/spring_boot.png) | ![Oauth2](image/be/oauth2.jpeg) | ![security](image/be/ss.png)  |
|----------------------------|------------------------------|------------------------------------------|--------------------------|-------------------------------|
| Java 21                    | gradle                       | Spring Boot                              |  Oauth2         | Spring Security               |


| ![JPA](image/be/jpa.png) | ![QueryDSL](image/be/queryDsl.jpg) | ![Redis](image/be/redis.png) | ![mysql](image/be/mysql.png) | ![ElastiCache](image/be/elasticache.png) |
|--------------------------|------------------------------|----------------------------------|------------------------------|------------------------------|
|  Spring Data JPA         |  QueryDSL                    | Redis                            | MySQL 8                      | ElastiCache                  |


| ![Mockito](image/be/mockito.png) | ![junit](image/be/junit.png) |
|------------------------------------|------------------------------|
|  Mockito                           | Junit 5                      |


### DevOps
| ![actions](image/devops/actions.png) | ![ec2](image/devops/docker.png) | ![s3](image/devops/ec2.png) | ![codedeploy](image/devops/rds.png) |
|--------------------------------------|------------------------------|----------------------------|--------------------------------------------|
| Github Actions                       | Docker                       |  AWS EC2                          |   AWS RDS                                  |

### í˜‘ì—…íˆ´
| ![jira](image/work/github.png) | ![notion](image/work/notion.png) | ![slack](image/work/figma.png) | ![github](image/work/discord.png) |
|------------------------------|----------------------------------|--------------------------------|----------------------------------|
| Github                       | notion                           | Figma                          | Discord                           |

<br>

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥ êµ¬í˜„
- [ê¹€ë³‘ì°¬]
	- ë¡œê·¸ì¸/íšŒì›ê°€ì…
    		- oauth2ë¥¼ ì´ìš©
    - access, refresh í† í°ì„ ì´ìš©í•˜ì—¬
  - ì¹´í˜ ì¡°íšŒ
    - ë„¤ì´ë²„ APIë¥¼ ì´ìš©í•œ ì¹´í˜ ì •ë³´ ìµœì‹ í™”
- [ë¬¸ë‚¨ê²½]
- [ì´ìŠ¹í—Œ]
- [ì„ìš©íƒœ]
- [ì´ì£¼ì—°]
  	- ë¦¬ë·° ê´€ë ¨ ê¸°ëŠ¥
  	   	- ë¦¬ë·° ìµœì‹ ìˆœ/ë³„ì ìˆœ ì¡°íšŒ
		- ë¦¬ë·° íƒœê·¸ í•„í„°ë§ ì¡°íšŒ
  	   	- ì¹´í˜ì˜ ëª¨ë“  ë¦¬ë·° ì¡°íšŒ
		- ë¦¬ë·° CRUD
  	- ë¦¬ë·° ì„ì‹œì €ì¥ ê´€ë ¨ ê¸°ëŠ¥
  	  	- ë‚´ ì„ì‹œì €ì¥ ì¡°íšŒ
 		- ì„ì‹œì €ì¥ CRUD
	- ì´ë¯¸ì§€ ê´€ë ¨ ê¸°ëŠ¥
 		- ë¦¬ë·° ì´ë¯¸ì§€ CRUD
		- ì„ì‹œì €ì¥ ë¦¬ë·° ì´ë¯¸ì§€ CRUD
		- í”„ë¡œí•„ ì´ë¯¸ì§€ CRUD
  	- ë‹‰ë„¤ì„ ëœë¤ ìƒì„± ê¸°ëŠ¥


<br>

## âš½ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<details>
<summary> ê¹€ë³‘ì°¬ </summary>
	
<details>
<summary>~~~ë¬¸ì œ</summary>

##### `ğŸ¤”ë¬¸ì œ ë°œìƒ`
* ë‚˜ë‚˜
##### `ğŸ”ì›ì¸ ë¶„ì„`
* ë‚˜ë‚˜
##### `â›í•´ê²° ê³¼ì •`
* ë‚˜ë‚˜
  ```java
  ìë°” ì½”ë“œ
  system.out.println()
  ```
  ```javascript
  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ
  console.log()
  ```
##### `ğŸ’ê²°ë¡ `
* ë‚˜ë‚˜
</details>

<details>
<summary>~~~ë¬¸ì œ</summary>

##### `ğŸ¤”ë¬¸ì œ ë°œìƒ`
* ë‚˜ë‚˜
##### `ğŸ”ì›ì¸ ë¶„ì„`
* ë‚˜ë‚˜
##### `â›í•´ê²° ê³¼ì •`
* ë‚˜ë‚˜
##### `ğŸ’ê²°ë¡ `
* ë‚˜ë‚˜
</details>
</details>

<details>
<summary> ë¬¸ë‚¨ê²½ </summary>
</details>
<details>
<summary> ì´ìŠ¹í—Œ </summary>
</details>
<details>
<summary> ì„ìš©íƒœ </summary>
</details>
<details>
<summary> ì´ì£¼ì—° </summary>
<details>
<summary>DTO í˜•ë³€í™˜ì‹œì˜ ì½”ë“œ ê°€ë…ì„± ë¬¸ì œ í•´ê²°</summary>
<br>
    
<!-- - **DTO í˜•ë³€í™˜ì‹œì˜ ì½”ë“œ ê°€ë…ì„± ë¬¸ì œ í•´ê²° **** -->
### ğŸ¤”ë¬¸ì œ ë°œìƒ

- Tupleì„ ì‚¬ìš©í•˜ì—¬ DTOë¥¼ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ì½”ë“œê°€ ë³µì¡í•´ì§€ê³ , ê°€ë…ì„±ì´ ë–¨ì–´ì§€ë©° ìœ ì§€ë³´ìˆ˜ì— ì–´ë ¤ì›€ì´ ë°œìƒí–ˆë‹¤.

- **ë¬¸ì œì˜ ì½”ë“œ**
    - ìˆ˜ë™ìœ¼ë¡œ DTOì— ë§¤í•‘í•˜ëŠ” êµ¬ì¡° â†’ **ì½”ë“œ ë³µì¡, ê°€ë…ì„± ì €í•˜**

    ```jsx
    public ShowReviewResponse findShowReviewResponseById(Long reviewId) {
        List<Tuple> results = queryFactory
                 .from(review)
                .select(review, tag.tagId, reviewImage.id, user)
                .leftJoin(reviewImage).on(review.id.eq(reviewImage.review.id))
                .leftJoin(review.user).fetchJoin()
                .leftJoin(tag).on(review.id.eq(tag.review.id))
                .where(review.id.eq(reviewId))
                .fetch();

        Map<Long, ShowReviewResponse> reviewMap = new HashMap<>();
        Long reviewId = null;
        for (Tuple tuple : results) {
            Review reviewEntity = tuple.get(review);
            Integer tagId = tuple.get(tag.tagId);
            UUID reviewImageId = tuple.get(reviewImage.id);
            User userEntity = tuple.get(user);
            reviewId = reviewEntity.getId();

            ShowReviewResponse res = reviewMap.computeIfAbsent(reviewEntity.getId(), key 
                    -> new ShowReviewResponse(reviewEntity, userEntity));
            if (tagId != null) {
                res.addTagId(tagId);
            }
            if (reviewImageId != null) {
                res.addImageId(reviewImageId);
            }
        }
        return reviewMap.get(reviewId);

    }
    ```


### â›í•´ê²° ê³¼ì •

## **âœ…** ì‹œë„ 1 : @QueryProjection ì‚¬ìš©í•˜ê¸°

- @QueryProjectionì„ í™œìš©í•˜ì—¬ Qíƒ€ì… DTO ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³ , ì´ë¥¼ **select()**ì—ì„œ ë°”ë¡œ ì‚¬ìš©
- **ğŸ›  ë¦¬íŒ©í† ë§ ê²°ê³¼**

    ```java
    public ShowReviewResponse findShowReviewResponseById(Long reviewId) {
        return queryFactory
                .select(new QShowReviewResponse(
                        review,
                        set(reviewImage.id),    
                        set(tag.tagId)
                ))
                .from(review)
                .leftJoin(reviewImage).on(review.id.eq(reviewImage.review.id))
                .leftJoin(review.user).fetchJoin()
                .leftJoin(tag).on(review.id.eq(tag.review.id))
                .where(review.id.eq(reviewId))
                .groupBy(review.id, reviewImage.id, tag.tagId)
                .fetchOne();
    }
    ```


- **ë¬¸ì œ ë°œìƒ** : **ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œê°€ ë°œìƒ**
    - DISTINCTë¡œëŠ” í•´ê²°í•  ìˆ˜ ì—†ìŒ
        - ì¹´í…Œì‹œì•ˆ ê³±ì—ì„œ ë°œìƒí•œ ì¤‘ë³µ ë°ì´í„°ëŠ” í•´ê²°í•˜ì§€ ëª»í•œë‹¤!
        - left joinì— ì˜í•´ ì—¬ëŸ¬ reviewImageì™€ ì—¬ëŸ¬ tagê°€ í•˜ë‚˜ì˜ reviewì— ëŒ€í•´ ê°ê° ë‹¤ë¥¸ í–‰ìœ¼ë¡œ ìƒì„±

            â†’ reviewImage.idì™€ tag.tagIdëŠ” ê°œë³„ì ìœ¼ë¡œ ê·¸ë£¹í™”ë˜ì–´ ì¤‘ë³µëœ ë°ì´í„° ìƒì„±ë¨


---

## **âœ…** ì‹œë„ 2 : QueryDSLì˜ groupBy().transform() ì‚¬ìš©í•˜ê¸°

### â“ì¼ë°˜ì ì¸ groupByì™€ ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€?

- **ê·¸ë£¹í™” ì‹œì ì´ ë‹¤ë¥´ë‹¤!**
    - ì¼ë°˜ì ì¸ groupByëŠ” ê·¸ë£¹í™” ë¡œì§ì„ **DBì—ì„œ ìˆ˜í–‰**
    - groupBy().transform()ì€ ê·¸ë£¹í™” ë¡œì§ì„ **ë©”ëª¨ë¦¬ì—ì„œ ìˆ˜í–‰**

        â†’ **ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œë¥¼** ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŒ


### â“ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ?

- ë©”ëª¨ë¦¬ì—ì„œ ê·¸ë£¹í™”ë¥¼ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ë³µì¡í•œ DB ì¿¼ë¦¬ ëŒ€ì‹  java ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŒ

    â†’ javaì˜ set() í•¨ìˆ˜ ì´ìš©í•˜ì—¬ ì¤‘ë³µ ì œê±° í›„ DTOë¡œ ë³€í™˜ ê°€ëŠ¥


### â“ì‚¬ìš©ì‹œ ì„±ëŠ¥ ì €í•˜ ë¬¸ì œëŠ” ì—†ì„ê¹Œ?

- **ê·¸ë£¹í™”í•  ë°ì´í„°ì˜ ì–‘ì´ ì ì€ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤!**
    - ê·¸ë£¹í™” ë¡œì§ì´ ë©”ëª¨ë¦¬ì—ì„œ ì²˜ë¦¬ë˜ë¯€ë¡œ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë©”ëª¨ë¦¬ì— ë¡œë“œí•´ì•¼ í•¨

        â†’ ë°ì´í„° ì–‘ì´ ë§ìœ¼ë©´ CPUì™€ ë©”ëª¨ë¦¬ì— ë¶€ë‹´ì„ ì¤„ ìˆ˜ ìˆìŒ

    - **ì´ë²ˆ ë¬¸ì œì˜ ê²½ìš°..**
        - í•¨ìˆ˜ í˜¸ì¶œì‹œ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ëŠ” ìµœëŒ€ í–‰ ê°œìˆ˜ê°€ 25ê°œ(ì¹´í…Œì‹œì•ˆ ê³±ìœ¼ë¡œ ì¸í•œ ì¤‘ë³µ ë°ì´í„° í¬í•¨)ë¡œ, ë°ì´í„° ì–‘ì´ ì ì–´ ì„±ëŠ¥ì— í° ì˜í–¥ ì—†ìŒ


---

## **ğŸ› ** ìµœì¢… ë¦¬íŒ©í† ë§ ê²°ê³¼

```jsx
public ShowReviewResponse findShowReviewResponseById(Long reviewId) {
    return queryFactory
            .from(review)
            .leftJoin(reviewImage).on(review.id.eq(reviewImage.review.id))
            .leftJoin(review.user).fetchJoin()
            .leftJoin(tag).on(review.id.eq(tag.review.id))
            .where(review.id.eq(reviewId))
            .transform(
                    groupBy(review.id).as(
                            new QShowReviewResponse(
                                    review,
                                    set(reviewImage.id),    // ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•´ set ì‚¬ìš©
                                    set(tag.tagId)          // ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•´ set ì‚¬ìš©
                            )
                    )
            )
            .get(reviewId);
}
```

### ğŸ’ê²°ë¡ 

- **QueryDSLì˜ groupBy().transform()**ì„ ì‚¬ìš©í•˜ì—¬ DTOë¡œ ë³€í™˜í•¨ìœ¼ë¡œì¨ ê°€ë…ì„±ì„ ë†’ì´ê³ , ì¹´í…Œì‹œì•ˆ ê³± ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.
</details>
</details>
</details>


## ğŸ”— í”„ë¡œì íŠ¸ ë¬¸ì„œ
* [ë…¸ì…˜](https://www.notion.so/18fc5e41552d81bfa985c870e5c2fed4)
* [í¬ìŠ¤íŠ¸ë§¨](https://www.postman.com/cafelog/cafelog-team/overview)
* [í”¼ê·¸ë§ˆ](https://www.figma.com/design/UPFpjUYoJa0nx1GiQNktp0/%5B2025-%ED%8C%80-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%5D-%EC%BB%A4%ED%94%BC-%EA%B8%B0%EB%A1%9D?node-id=0-1&t=0iUqRTZvxP7KlhpO-1)



